{"version":3,"sources":["../../../src/components/reducer.jsx"],"names":[],"mappings":"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","file":"reducer.js","sourcesContent":["var initalState = getInitialState();\nvar id = 0;\n\nfunction reduce(state = initalState, action) {\n  switch (action.type) {\n    case 'PLAYER-DRAW':\n      var index;\n\n      index = random(state.playerDeck.length - 1);\n      return {\n        ...state,\n        playerHand: [\n          ...state.playerHand,\n          {\n            text: state.playerDeck[index].text,\n            onPlay: state.playerDeck[index].onPlay,\n            id: id++\n          }\n        ],\n        playerDeck: discardCard(state.playerDeck, index)\n      };\n    case 'LOCATION-DRAW':\n      var index;\n\n      index = random(state.locationDeck.length - 1);\n      return {\n        ...state,\n        locationCards: [...state.locationCards, {text: state.locationDeck[index], id: id++}],\n        locationDeck: discardCard(state.locationDeck, index)\n      };\n    case 'DISCARD-LOCATION-CARD':\n      return {\n        ...state,\n        locationCards: discardCard(state.locationCards, null, action.id)\n      };\n    case 'DISCARD-PLAYER-CARD':\n      return {\n        ...state,\n        playerHand: discardCard(state.playerHand, null, action.id)\n      };\n    case 'CHANGE-PLAYER-HEALTH':\n      return {\n        ...state,\n        playerHealth: state.playerHealth + action.value\n      };\n    case 'CHANGE-PLAYER-RAGE':\n      var playerRage;\n\n      playerRage = state.playerRage + action.value;\n      if (playerRage < 0) {\n        playerRage = 0;\n      }\n\n      return {\n        ...state,\n        playerRage: playerRage\n      };\n    case 'ROLL-D4':\n      return {\n        ...state,\n        d4: random(4, 1)\n      };\n    case 'ROLL-D6':\n      return {\n        ...state,\n        d6: random(6, 1)\n      };\n    case 'ROLL-D10':\n      return {\n        ...state,\n        d10: random(10, 1)\n      };\n    case 'ADD-MODIFIER':\n      return {\n        ...state,\n        modifiers: [...state.modifiers, action.value]\n      };\n    case 'CHANGE-PLAYER-GOLD':\n      var playerGold;\n\n      playerGold = state.playerGold + action.value;\n      if (playerGold < 0) {\n        playerGold = 0;\n      }\n      return {\n        ...state,\n        playerGold: playerGold\n      };\n    default:\n      return state;\n  }\n};\n\nfunction discardCard(array, index=0, id=-1) {\n  var cardIndex;\n\n  if (id != -1) {\n    cardIndex = array.findIndex(card => card.id === id);\n  } else {\n    cardIndex = index;\n  }\n\n  return [\n    ...array.slice(0, cardIndex),\n    ...array.slice(cardIndex + 1)\n  ];\n};\n\nfunction getInitialState () {\n  return {\n    locationCards: [],\n    locationDeck: getLocationDeck(),\n    playerHand: [],\n    playerDeck: getPlayerDeck(),\n    playerHealth: 30,\n    playerMaxHealth: 30,\n    d4: 4,\n    d6: 6,\n    d10: 10,\n    modifiers: [],\n    playerGold: 0\n  };\n};\n\nfunction getPlayerDeck () {\n  var cardPool;\n\n  cardPool = [\n    { text: \"1. Simple Axe.\\n Basic Weapon.\\n  Add 1 d4 to a combat check, generate 2 rage.\\n  2 rage: Add 1 d4 + 2 to a combat check.\\n  Durability: 2\", onPlay: () => {} },\n    { text: \"2. Miner's Pick.\\n  Basic Item.\\n  Add 1 to a check.\\n  Then gain 1 d4 gold.\\n\", onPlay: () => {} },\n    { text: \"3. Iron Shovel.\\n  Basic Item.\\n  Discard 1 card, then draw 2 cards.\\n\", onPlay: () => {} },\n    { text: \"4. Soldier's helmet.\\n  Basic Armor.\\n  Reduce damage dealt to yourself by 1d4.\\n\", onPlay: () => {} },\n    { text: \"5. Iron Breast Plate.\\n  Basic Armor.\\n  Reduce damage dealt to yourself by 2.\\n\", onPlay: () => {} },\n    { text: \"6. Horned Helm.\\n  Basic Armor.\\n  Add 1 to a combat check.\\n  Reduce damage dealt to yourself by 1 this turn.\\n\", onPlay: () => {} },\n    { text: \"7. Tarnished Buckler.\\n  Basic Armor.\\n  Reduce damage dealt to yourself by half.\\n\", onPlay: () => {} },\n    { text: \"8. Heroe's Sword.\\n  Basic Weapon.\\n  Add 2 to a combat check, generate 2 rage.\\n  2 rage: Add 1 d6 + 1 to a combat check.\\n  Durability: 2\", onPlay: () => {} },\n    { text: \"9. Beserker Axe.\\n  Basic Weapon.\\n  Add 2 d4s to a combat check.\\n  Gain rage equal to the damage done.\\n  4 rage: Add 4 d4s to a combat check, do 1 d4 damage to yourself.\\n  Durability: d6 4+\",  onPlay: () => {} },\n    { text: \"10. Battle Cry.\\n  Basic Action.\\n  Add 1 d6 to your allies' attacks this turn.\\n  Generate 5 rage.\\n\", onPlay: () => {} },\n    { text: \"11. Sharpening Stone.\\n  Basic Item.\\n  Give a weapon 'add 1 to a combat check' and increase its durability by 1.\\n\", onPlay: () => {} },\n    { text: \"12. Burning Rage.\\n  Rare Action.\\n  Deal damage equal to your rage to an enemy.\\n  Deal half the damage to yourself (rounded down).\\n  Lose all rage.\\n\", onPlay: () => {} },\n    { text: \"13. War Master.\\n  Basic Ally.\\n  Add 1 to Strength and Wisdom rolls for the rest of the scenario.\\n\", onPlay: () => {} },\n    { text: \"14. Valiant Soldier.\\n  Basic Ally.\\n  Add 1 die to a combat roll.\\n\", onPlay: () => {} },\n    { text: \"15. Scavenge.\\n  Basic Action.\\n  If an enemy died this turn, acquire a piece of basic armor.\\n\", onPlay: () => {} },\n    { text: \"16. Loyal Soldier.\\n  Basic Ally.\\n  When taking damage, roll 1 d6.\\n  If the result is equal to or less than the damage, prevent it.\\n\", onPlay: () => {} },\n    { text: \"17. Mercenary.\\n  Basic Ally.\\n  Pay 2 gold, add 2 d4s to a combat check.\\n\", onPlay: () => {} },\n    { text: \"18. Gauntlets of Strength.\\n  Basic Armor.\\n  Add 2 to a non-combat strength check.\\n\", onPlay: () => {} }\n  ];\n\n  return shuffleDeck(cardPool);\n};\n\nfunction getLocationDeck () {\n  var cardPool;\n\n  cardPool = [\n    \"1. Crypt Zombie.\\n 1/1.\\n  Undead.\\n  When defeated, leave behind a tombstone.\\n\",\n    \"2. Tombstone 0/10.\\n  At the end of the turn, roll a d4.\\n  On a 1, summon a 1/1 zombie.\\n Amass.\\n\",\n    \"3. Vampire.\\n 2/6.\\n  Undead.\\n  Vampiric.\\n\",\n    \"4. Diseased Wolf.\\n 2/3.\\n Beast.\\n  Spreads Disease 1/3 on hit.\\n\",\n    \"5. Highway bandit.\\n 2/2.\\n  Human.\\n  Ambush.\\n\",\n    \"6. Skeleton Soldier.\\n 3/3.\\n  Undead.\\n  Takes half damage from attacks with weapons.\\n\",\n    \"7. Coffin Crawlers.\\n 2 x 2/1.\\n  Spider.\\n\",\n    \"8. Diseased Crow.\\n 1/1.\\n  Beast.\\n  Spreads Disease 1/2 on hit.\\n  When attacked, roll a d4.\\n  On 3+, the attack is dodged.\\n\",\n    \"9. Grave Robber.\\n 2/5.\\n  On hit, player discards a card.\\n\",\n    \"10. Giant Bat.\\n 3/5.\\n Beast.\\n Vampiric.\\n\",\n    \"11. Crypt Demon.\\n 6/16.\\n Demon Boss.\\n  At the end of the turn, deal 2 damage to all other targets.\\n  This damage cannot be reduced.\\n\"\n  ];\n\n  return shuffleDeck(cardPool);\n};\n\nfunction shuffleDeck (deck) {\n  var index, length, shuffledDeck;\n\n  shuffledDeck = [];\n  length = deck.length;\n  for (var i = 0; i < length; i++) {\n    index = random(deck.length - 1);\n    shuffledDeck.push(deck[index]);\n    deck.splice(index, 1);\n  }\n  return shuffledDeck;\n};\n\nfunction random (max, min = 0) {\n  return Math.floor(Math.random() * (max + .9999 - min)) + min;\n};\n\nvar Reducer = {\n  reduce: reduce,\n  initialState: getInitialState()\n};\n\nexport default Reducer;\n\n"]}